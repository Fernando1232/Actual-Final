(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{141:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return l});var i=n(3),o=n(0),a=n(28),s=n.n(a),r=n(85),c=function(e,t){return e+":"+t},l=function(e){var t=o.a.get("googleAnalytics.trackers.editorial"),n={play:"metric1",skip:"metric2",25:"metric3",50:"metric4",75:"metric5",end:"metric6"};["play","25","50","75","end"].forEach(function(o){i.a.once(c(o,e),function(i){var a={mediaId:e,mediaType:"video",eventType:o,isPreroll:!1};!function(e){var t={video:{id:"gu-video-youtube-"+a.mediaId,eventType:"video:content:"+a.eventType}};s.a.record(t)}(),window.ga(t+".send","event",Object(r.a)(a,n,i,"gu-video-youtube",function(){return"video content"},e))})})},d=function(e,t){i.a.emit(c(e,t),t)}},170:function(e,t,n){var i=n(52),o=n(75),a=n(35),s={leading:!1,maxWait:0,trailing:!1};e.exports=function(e,t,n){var r=!0,c=!0;if(!o(e))throw new TypeError;return!1===n?r=!1:a(n)&&(r="leading"in n?n.leading:r,c="trailing"in n?n.trailing:c),s.leading=r,s.maxWait=t,s.trailing=c,i(e,t,s)}},200:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var i=n(84),o=function(e){Object.keys(e).forEach(function(t){i.a.set("accessibility."+t,e[t])})},a=function(e){return!0===function(e){return!1!==i.a.get("accessibility."+e)}(e)}},203:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(9),o=n.n(i),a=n(0),s=n(201),r=n(169),c=new Promise(function(e){window.YT&&window.YT.Player?e():window.onYouTubeIframeAPIReady=e}),l=function(e){e&&e.classList.add("youtube__video-started")},d=function(e){return document.getElementById("youtube-"+e)},u=function(e,t,n){return Object(s.a)("https://www.youtube.com/iframe_api",{}),c.then(function(){return function(e,t,n,i,o){var a=!1!==Object(r.b)(r.e);return new window.YT.Player(e,{videoId:t,width:"100%",height:"100%",events:{onReady:n,onStateChange:i,onError:function(e){console.error("YOUTUBE: "+e)}},embedConfig:{adsConfig:{nonPersonalizedAd:!a}}})}(e.id,n,function(e){var i=d(n);(function(e){return e.target.getCurrentTime()>0})(e)&&l(i),function(e,t,n){o.a.write(function(){n&&n.classList.add("youtube__video-ready")}),t&&"function"==typeof t.onPlayerReady&&t.onPlayerReady(e)}(e,t,i)},function(e){!function(e,t,n){if(n&&a.a.get("page.isDev")){var i=window.YT.PlayerState,s=Object.keys(i).find(function(t){return i[t]===e.data});s&&console.log("Player "+n.id+" is "+s)}o.a.write(function(){["ENDED","PLAYING","PAUSED","BUFFERING","CUED"].forEach(function(t){n&&(n.classList.toggle("youtube__video-"+t.toLocaleLowerCase(),e.data===window.YT.PlayerState[t]),l(n))})}),t&&"function"==typeof t.onPlayerStateChange&&t.onPlayerStateChange(e)}(e,t,d(n))})})}},204:function(e,t,n){"use strict";n.d(t,"a",function(){return x}),n.d(t,"b",function(){return _});var i=n(7),o=(n(1),n(203)),a=n(141),s=n(51),r=n(19),c=n(0),l=n(17),d=n(52),u=n.n(d),h=n(200),f={},g=[];document.addEventListener("focusout",function(){g.forEach(function(e){i.a.read(function(){if(document.activeElement===e)return Object(r.a)(".vjs-big-play-button",e.parentElement)}).then(function(e){i.a.write(function(){e&&e.addClass("youtube-play-btn-focussed")})})})}),document.addEventListener("focusin",function(){i.a.read(function(){return Object(r.a)(".vjs-big-play-button")}).then(function(e){i.a.write(function(){e&&e.removeClass("youtube-play-btn-focussed")})})});var p=function(e){return e.split("/")[0]},m=function(e){f[e].progressTracker&&clearInterval(f[e].progressTracker)},b={ENDED:function(e){var t=f[e];m(e),Object(a.b)("end",p(e)),t.pendingTrackingCalls=[25,50,75];var n=t.iframe&&t.iframe.closest(".immersive-main-media")||null;n&&n.classList.remove("atom-playing")},PLAYING:function(e){var t=f[e];if(t){m(e),function(e){f[e].progressTracker=setInterval(function(e){var t=f[e].player,n=f[e].pendingTrackingCalls;if(n.length){t.duration||(t.duration=t.getDuration());var i=t.getCurrentTime();Math.round(i/t.duration*100)>=n[0]&&(Object(a.b)(n[0],p(e)),n.shift())}}.bind(null,e),1e3),f[e].progressTracker}(e),Object(a.b)("play",p(e));var n=t.iframe&&t.iframe.closest(".immersive-main-media")||null,i=t.overlay&&t.overlay.parentNode,o=i&&i.querySelector(".end-slate-container");n&&n.classList.add("atom-playing"),t.endSlate&&!o&&t.endSlate.fetch(i,"html")}},PAUSED:function(e){return m(e)}},v=function(){var e=document.querySelector(".immersive-main-media__media .youtube-media-atom"),t=e?e.offsetHeight:0,n=document.querySelector(".immersive-main-media__headline-container"),i=t-(n?n.offsetHeight:0),o=document.querySelector(".youtube-media-atom__immersive-interface");o&&(o.style.top=i+"px")},y=function(e,t,n,i){f[e]={player:i.target,pendingTrackingCalls:[25,50,75],iframe:n},function(e){return"Video"===c.a.get("page.contentType")&&(c.a.get("page.isDev")?0===document.referrer.indexOf(window.location.origin):0===document.referrer.indexOf(c.a.get("page.host")))&&!(Object(l.n)()||Object(l.k)())&&(f[e].iframe&&f[e].iframe.closest('figure[data-component="main video"]')||!1)&&Object(h.a)("flashing-elements")}(e)&&i.target.playVideo(),t&&(f[e].overlay=t,c.a.get("page.section")&&Object(l.l)({min:"desktop"})&&(f[e].endSlate=function(e){var t=e.parentNode;if(t instanceof HTMLElement){var n=(t.dataset||{}).endSlate;if(n){var i=new s.a;return i.endpoint=n,i}}}(t))),n&&n.closest(".immersive-main-media__media")&&(v(),window.addEventListener("resize",u()(v.bind(null),200)))},w=function(e){e&&i.a.read(function(){Object(r.a)(".youtube-media-atom:not(.no-player)",e).each(function(e,t){var n=e.querySelector("div");if(n){g.push(n);var i=e.getAttribute("data-media-atom-id")+"/"+t;e.setAttribute("data-unique-atom-id",i);var s=e.querySelector(".youtube-media-atom__overlay");Object(a.a)(p(i)),Object(o.a)(n,{onPlayerReady:y.bind(null,i,s,n),onPlayerStateChange:function(e,t){return Object.keys(b).forEach(function(e,t,n){t===window.YT.PlayerState[n]&&b[n]&&b[n](e)}.bind(null,e,t.data))}.bind(null,i)},n.dataset.assetId)}})})},x=function(e){e&&e.length?e.forEach(w):w(document.body)},_=function(e){var t=f[e];t&&t.player.pauseVideo()}},328:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(20),o=n.n(i),a=n(0),s=n(17),r=n(121),c=n(69),l=n(84),d=new function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.a;o()(this,e);var n=window.location.hash.match(/[#&]noads(&.*)?$/),i=window.location.hash.match(/[#&]noadsaf(&.*)?$/),d=!n&&!l.a.isOff("adverts"),u=t.page.shouldHideAdverts||"childrens-books-site"===t.page.section,h=t.page.isMinuteArticle,f="Article"===t.page.contentType,g="Interactive"===t.page.contentType,p=t.page.isLiveBlog,m=t.page.isHosted,b="Identity"===t.page.contentType||"identity"===t.page.section,v=t.switches,y="wide"===Object(s.c)(),w=document.documentElement&&document.documentElement.classList.contains("has-sticky"),x=t.page.showNewRecipeDesign&&t.tests.abNewRecipeDesign,_=t.get("page.pageId","").includes("help/ng-interactive/2017/mar/17/contact-the-guardian-securely");this.adFree=v.commercial&&v.adFreeSubscriptionTrial&&(!!i||Object(r.c)()),this.dfpAdvertising=v.commercial&&d&&!u,this.stickyTopBannerAd=!this.adFree&&!t.page.disableStickyTopBanner&&!w,this.articleBodyAdverts=this.dfpAdvertising&&!this.adFree&&!h&&f&&!p&&!m&&!x,this.carrotTrafficDriver=!this.adFree&&this.articleBodyAdverts&&t.get("switches.carrotTrafficDriver",!1)&&!t.page.isPaidContent,this.videoPreRolls=this.dfpAdvertising&&!this.adFree,this.highMerch=this.dfpAdvertising&&!this.adFree&&!h&&!m&&!g&&!t.page.isFront&&!x,this.thirdPartyTags=d&&!b&&!_,this.outbrain=this.dfpAdvertising&&!this.adFree&&v.outbrain&&!n&&!u&&f&&!t.page.isPreview&&t.page.showRelatedContent&&!(Object(c.g)()&&t.page.commentable),this.commentAdverts=this.dfpAdvertising&&!this.adFree&&!h&&t.switches.enableDiscussionSwitch&&t.page.commentable&&(!p||y),this.liveblogAdverts=p&&this.dfpAdvertising&&!this.adFree,this.paidforBand=t.page.isPaidContent&&!w,this.adFeedback=!1}},333:function(e,t,n){var i=n(75);e.exports=function(e){var t,n;if(!i(e))throw new TypeError;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}},358:function(e,t,n){"use strict";n.r(t);var i=n(5),o=n.n(i),a=n(7),s=n(31),r=n.n(s),c=n(19),l=n(0),d=n(168),u=n(361),h=n(388),f=n(69),g=n(408),p=n(20),m=n.n(p),b=n(24),v=n.n(b),y=n(83),w=n.n(y),x=n(82),_=n.n(x),j=n(51),k=n(3),C=function(e){function t(){m()(this,t);var e=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=l.a.get("page.section"),i=n&&!["info","global"].includes(n);return e.endpoint="/most-read"+(i?"/"+n:"")+".json",k.a.emit("register:begin","popular-in-section"),e.fetch(r()(".js-popular-trails"),"html"),e}return _()(t,e),v()(t,[{key:"ready",value:function(){k.a.emit("modules:popular:loaded"),k.a.emit("register:end","popular-in-section")}}]),t}(j.a),O=n(33),T=n(346),E=function(){function e(t){m()(this,e),this.opts=t,this.dom=t.dom,this.expanded=!1!==t.expanded,this.cta=document.createElement("button"),this.showCount=!1!==t.showCount}return v()(e,[{key:"renderState",value:function(){this.expanded?this.dom.classList.remove("shut"):this.dom.classList.add("shut")}},{key:"getCount",value:function(){return parseInt(this.dom.getAttribute("data-count")||"0",10)}},{key:"updateCallToAction",value:function(){var e="Show "+(this.showCount?this.getCount()+" ":"")+(this.expanded?"fewer":"more");this.cta.innerHTML=e,this.cta.setAttribute("data-link-name","Show "+(this.expanded?"more":"fewer")),this.cta.setAttribute("data-is-ajax","1")}},{key:"toggleExpanded",value:function(){this.expanded=!this.expanded,this.renderState(),this.updateCallToAction()}},{key:"isOpen",value:function(){return!this.dom.classList.contains("shut")}},{key:"renderCallToAction",value:function(){var e=this;this.cta.addEventListener("click",function(){e.toggleExpanded()}),this.cta.className="cta",this.opts.buttonAfterEl?this.opts.buttonAfterEl.insertAdjacentElement("afterend",this.cta):this.dom.appendChild(this.cta),this.updateCallToAction()}},{key:"scrollToCallToAction",value:function(){var e=this;this.expanded||window.setTimeout(function(){e.cta.scrollIntoView()},550)}},{key:"init",value:function(){this.dom.classList.contains("expandable-initialised")||!this.dom.innerHTML||this.getCount()<3||(this.dom.classList.add("expandable-initialised"),this.renderCallToAction(),this.renderState())}},{key:"toggle",value:function(){this.toggleExpanded()}}]),e}(),S=n(328),I=function(e){new E({dom:e,expanded:!1,showCount:!1}).init()},A={uk:{features:"uk-alpha/features/feature-stories",comment:"uk-alpha/contributors/feature-stories"},us:{features:"us-alpha/features/feature-stories",comment:"us-alpha/contributors/feature-stories"},au:{features:"au-alpha/features/feature-stories",comment:"au-alpha/contributors/feature-stories"},int:{features:"22167321-f8cf-4f4a-b646-165e5b1e9a30",comment:"ee3386bb-9430-4a6d-8bca-b99d65790f3b"}},R=function(e){function t(){m()(this,t);var e=w()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object(T.a)("tonal-content"),e.edition=l.a.get("page.edition","").toLowerCase(),e.isSupported()&&(e.endpoint=e.getEndpoint()),e}return _()(t,e),v()(t,null,[{key:"getTone",value:function(){return l.a.get("page.tones","").split(",")[0].toLowerCase()}},{key:"ready",value:function(){k.a.emit("modules:tonal:loaded"),Object(T.b)("tonal-content")}},{key:"error",value:function(){Object(T.c)("tonal-content")}}]),v()(t,[{key:"getEndpoint",value:function(){return"/container/"+A[this.edition][t.getTone()]+".json"}},{key:"isSupported",value:function(){return t.getTone()in A[this.edition]}}]),t}(j.a),P=n(9),L=n.n(P),B=n(32),$=n(378),M=n(120),q=n.n(M),D=n(202),z=n(492),N=n.n(z),F=n(491),H=n.n(F),U=Object(c.a)(".js-sharecount"),J={facebook:"n/a"},W=0,Y=void 0,G=void 0,V=function(){var e=l.a.page.ajaxUrl+"/sharecount/"+l.a.page.pageId+".json";Object(O.a)(e,{mode:"cors"}).then(function(e){var t=e.share_count||0;J.facebook=t,function(e){var t=Object(D.a)("share"),n=U.hasClass("js-sharecount-immersive")?H.a:N.a,i=q()(n,{icon:t});U.removeClass("u-h").html(i).css("display",""),G=Object(c.a)(".sharecount__value--short",U[0]),Y=Object(c.a)(".sharecount__value--full",U[0]),function(e){if(0!==e){var t=parseInt((W+=e).toFixed(0),10),n=Object($.a)(t),i=t>1e4?Math.round(t/1e3)+"k":t;L.a.write(function(){Y.text(n),G.text(i)})}}(e)}(t),U.attr("title",q()("Facebook: <%=facebook%>",J))})},X=function(){if(l.a.switches.serverShareCounts&&U.length&&!l.a.page.isPreview)try{V()}catch(e){Object(B.a)(new Error("Error retrieving share counts ("+e.message+")"),{feature:"share-count"},!1)}},K=n(204);n.d(t,"initTrails",function(){return ae});var Z=function(){var e=l.a.get("page",{}),t=e.showRelatedContent,n=e.isPaidContent,i=e.section,o=e.shortUrl,a=e.seriesId;"Audio"!==l.a.get("page.contentType")&&"Video"!==l.a.get("page.contentType")||!t||n||!i||function(e,t,n,i,o){var a=new j.a,s="/"+t+"/section/"+n+(o?"/"+o:"")+".json?shortUrl="+i+("video"===t?"&exclude-tag=guardian-professional/guardian-professional":"");a.endpoint=s,a.fetch(e).then(function(){Object(K.a)([e]),k.a.emit("page:media:moreinloaded",e)})}(Object(c.a)(".js-more-in-section")[0],l.a.get("page.contentType","").toLowerCase(),i,o,a)},Q=function(e,t){window.location.hash?t():a.a.read(function(){return document.querySelector(e)}).then(function(e){e&&Object(u.a)(e,1500,t)})},ee=function(){l.a.get("page.isFront")||Q(".js-popular-trails",function(){new C})},te=function(){l.a.get("page.seriesId")||l.a.get("page.blogIds")||Q(".js-related",function(){var e={excludeTags:[]};"paid-content"!==l.a.get("page.sponsorshipType")&&e.excludeTags.push("tone/advertisement-features"),"contentType"in l.a.get("page")&&["video","interactive"].includes(l.a.page.contentType.toLowerCase())&&e.excludeTags.push("guardian-professional/guardian-professional"),function(e){var t=void 0,n=void 0,i=void 0,s=S.a.adFree&&l.a.get("page.isPaidContent");if(l.a.get("page.hasStoryPackage")){var r=document.body&&document.body.querySelector(".related-trails");r&&I(r)}else if(l.a.get("switches.relatedContent")&&l.a.get("page.showRelatedContent")&&!s){var c=document.body&&document.body.querySelector(".js-related");if(c&&!c.classList.contains("lazyloaded")){n=function(){if(!l.a.get("page.keywordIds"))return!1;var e,t,n=l.a.get("page.keywordIds","").split(","),i=l.a.get("page.isPaidContent")?n:(e=["sport/cricket","sport/rugby-union","sport/rugbyleague","sport/formulaone","sport/tennis","sport/cycling","sport/motorsports","sport/golf","sport/horse-racing","sport/boxing","sport/us-sport","sport/australia-sport","football/championsleague","football/premierleague","football/championship","football/europeanfootball","football/world-cup-2014","football/manchester-united","football/chelsea","football/arsenal","football/manchestercity","football/tottenham-hotspur","football/liverpool"],t=n,[].concat(o()(new Set(e))).filter(function(e){return new Set(t).has(e)}));return i.length?"/popular-in-tag/"+i[0]+".json":void 0}(),i=n?"related-popular-in-tag":"related-content",Object(T.a)(i),c.setAttribute("data-component",i),t=n||"/related/"+l.a.get("page.pageId")+".json";var d=e.excludeTags.map(function(e){return"exclude-tag="+e});e.excludeTags&&e.excludeTags.length&&(t+="?"+d.join("&")),Object(O.a)(t,{mode:"cors"}).then(function(e){return a.a.write(function(){c.innerHTML=e.html,c.classList.add("lazyloaded")})}).then(function(){var e=c.querySelector(".related-content");e&&I(e),k.a.emit("modules:related:loaded",c),Object(T.b)(i)}).catch(function(){c.remove(),Object(T.c)(i)})}}else[].concat(o()(document.querySelectorAll(".js-related"))).forEach(function(e){return e.classList.add("u-h")})}(e)})},ne=function(){Q(".js-onward",function(){(l.a.get("page.seriesId")||l.a.get("page.blogIds"))&&l.a.get("page.showRelatedContent")?new g.a(r()(".js-onward")):""!==l.a.get("page.tones","")&&a.a.read(function(){return document.querySelectorAll(".js-onward")}).then(function(e){[].concat(o()(e)).forEach(function(e){(new R).fetch(e,"html")})})})},ie=function(){l.a.get("switches.enableDiscussionSwitch")&&l.a.get("page.commentable")&&a.a.read(function(){return document.querySelector(".discussion")}).then(function(e){e&&(new h.a).attachTo(e)})},oe=function(){Object(f.g)()||a.a.read(function(){return Object(c.a)(".js-comments")}).then(function(e){return a.a.write(function(){if(e.appendTo(r()(".js-repositioned-comments")),"#comments"===window.location.hash){var t=e.offset().top;Object(c.a)(document.body).scrollTop(t)}})})},ae=function(){Object(d.b)([["c-discussion",ie],["c-comments",oe],["c-shares",X],["c-popular",ee],["c-related",te],["c-onward",ne],["c-more-in-section",Z]])}},363:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var i=n(20),o=n.n(i),a=n(24),s=n.n(a),r=n(3),c=n(9),l=n.n(c),d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o()(this,e),this.element=t,this.opts=Object.assign({},{top:0,containInParent:!0,emitMessage:!1},n)}return s()(e,[{key:"init",value:function(){var e=this,t=this.element.parentElement;t&&(l.a.read(function(){e.offsetFromParent=e.element.getBoundingClientRect().top-t.getBoundingClientRect().top},this),r.a.on("window:throttledScroll",this.updatePosition.bind(this)),l.a.read(this.updatePosition,this))}},{key:"updatePosition",value:function(){var e=this,t=this.element.parentElement;if(t){var n=this.element.getBoundingClientRect(),i=t.getBoundingClientRect(),o=n.height,a=void 0,s=void 0,r=void 0;if(i.top+this.offsetFromParent>0)r=!1,a={top:""},s="unfixed";else{r=!0;var c=this.opts.containInParent&&i.bottom<=n.height?Math.floor(i.bottom-o-this.opts.top):this.opts.top;a={top:c+"px"},s="fixed"}this.opts.emitMessage&&s&&s!==this.lastMessage&&(this.emitMessage(s),this.lastMessage=s),a&&l.a.write(function(){r?e.element.classList.add("is-sticky"):e.element.classList.remove("is-sticky"),Object.assign(e.element.style,a)},this)}}},{key:"emitMessage",value:function(e){r.a.emit("modules:"+this.element.id+":"+e)}}]),e}()},366:function(e,t,n){"use strict";var i=n(494),o=n.n(i),a=n(19),s=n(168),r=n(377),c=n(410),l=n(7),d=function(){l.a.read(function(){return{lastModifiedElm:document.querySelector(".js-lm"),webPublicationDateElm:document.querySelector(".js-wpd")}}).then(function(e){var t=e.lastModifiedElm,n=e.webPublicationDateElm;t&&n&&(l.a.write(function(){n.classList.add("content__dateline-wpd--modified")}),n.addEventListener("click",function(){l.a.write(function(){t.classList.toggle("u-h")})}))})},u=n(18),h=n.n(u),f=n(493),g=n.n(f),p=n(0),m=n(17),b=n(3),v=n(202),y=n(52),w=n.n(y),x='\n    <div class="selection-sharing">\n        <ul class="social u-unstyled u-cf" data-component="social-selection">\n            <li class="social__item" data-link-name="twitter">\n                <a  class="rounded-icon social-icon social-icon--twitter js-selection-twitter"\n                    data-link-name="social-selection"\n                    target="_blank"\n                    href="#">\n                    <span class="u-h">Share on Twitter</span>\n                    '+Object(v.a)("shareTwitter",["icon","centered-icon"])+'\n                </a>\n            </li>\n            <li class="social__item" data-link-name="email">\n                <a  class="rounded-icon social-icon social-icon--email js-selection-email"\n                    data-link-name="social-selection"\n                    target="_blank"\n                    href="#">\n                    <span class="u-h">Share via Email</span>\n                    '+Object(v.a)("shareEmail",["icon","centered-icon"])+"\n                </a>\n            </li>\n        </ul>\n    </div>\n",_=a.a.create(x),j=void 0,k=void 0,C=["js-article__body","content__standfirst","block","caption--main","content__headline"],O=function(){_.hasClass("selection-sharing--active")&&_.removeClass("selection-sharing--active")},T=function(){var e=window.getSelection&&document.createRange&&window.getSelection(),t=document.body;if(t&&e&&e.rangeCount>0&&e.toString()){var n=e.getRangeAt(0),i=g.a.getBoundingClientRect(n);if(!i)return;var o=Object(a.a)(t).scrollTop()+i.top,s=n.toString();if(!function(e){return C.some(function(t){return a.a.ancestor(e.startContainer,t)&&a.a.ancestor(e.endContainer,t)})}(n))return void O();s.length>252&&(s=s.slice(0,251)+"…");var r=encodeURIComponent(s),c=p.a.page.shortUrl+"/stw",l="https://twitter.com/intent/tweet?text=%E2%80%9C"+r+"%E2%80%9D&url="+encodeURI(c),d=encodeURI(p.a.page.webTitle),u=encodeURI(n.toString()),h=p.a.get("page.shortUrl")+"/sbl",f="mailto:?subject="+d+"&body=%E2%80%9C"+u+"%E2%80%9D "+encodeURI(h);j.attr("href",l),k.attr("href",f),_.css({top:o+"px",left:i.left+"px"}),_.hasClass("selection-sharing--active")||_.addClass("selection-sharing--active")}else O()},E=function(e){e.target.closest(".social__item")||O()},S=function(){document.body&&!Object(m.i)()&&(document.body.appendChild(_[0]),j=Object(a.a)(".js-selection-twitter"),k=Object(a.a)(".js-selection-email"),h.a.on(document.body,"keypress keydown keyup",w()(T,50)),h.a.on(document.body,"mouseup",w()(T,200)),h.a.on(document.body,"mousedown",w()(E,50)),b.a.on("window:throttledResize",T))};n.d(t,"a",function(){return R});var I=function(){Object(a.a)(".fenced").each(o.a.render)},A=function(){Object(c.b)(),Object(c.a)()},R=function(){Object(s.b)([["trail-a11y",r.a],["trail-fence",I],["trail-twitter",A],["trail-sharing",S],["trail-last-modified",d]])}},377:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(9),o=n.n(i),a=n(200),s=function(e){Object(a.a)("flashing-elements")?e&&e():o.a.write(function(){document.body&&document.body.classList.add("disable-flashing-elements"),e&&e()})}},380:function(e,t,n){"use strict";var i=n(20),o=n.n(i),a=n(24),s=n.n(a),r=n(125),c=function(){function e(t){o()(this,e),this.context=t.context,this.states=t.states||{},this.context.state=t.initial||"",this.debug=t.debug||!1,this.onChangeState=t.onChangeState.bind(this.context)||function(){}}return s()(e,[{key:"log",value:function(){var e;this.debug&&window.console&&window.console.log&&(e=window.console).log.apply(e,arguments)}},{key:"trigger",value:function(e,t){this.log("fsm: (event)",e);var n=this.context.state;(this.states[n].events[e]||r.a).call(this.context,t),(n!==this.context.state||this.context.reloadState)&&(this.context.reloadState=!1,this.onChangeState(n,this.context.state),(this.states[n].leave||r.a).apply(this.context),(this.states[this.context.state].enter||r.a).apply(this.context),this.log("fsm: (state)",n+" -> "+this.context.state))}}]),e}();t.a=c},382:function(e,t,n){"use strict";n.d(t,"a",function(){return x});var i=n(20),o=n.n(i),a=n(83),s=n.n(a),r=n(24),c=n.n(r),l=n(82),d=n.n(l),u=n(31),h=n.n(u),f=n(7),g=n(51),p=n(3),m=n(333),b=n.n(m),v=new Promise(function(e,t){p.a.on("modules:onward:geo-most-popular:ready",e),p.a.on("modules:onward:geo-most-popular:cancel",e),p.a.on("modules:onward:geo-most-popular:error",t)}),y=function(e){function t(){o()(this,t);var e=s()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.endpoint="/most-read-geo.json",p.a.emit("register:begin","geo-most-popular"),e}return d()(t,e),c()(t,null,[{key:"error",value:function(e){p.a.emit("modules:onward:geo-most-popular:error",e)}}]),c()(t,[{key:"ready",value:function(){p.a.emit("register:end","geo-most-popular"),p.a.emit("modules:onward:geo-most-popular:ready",this)}}]),t}(g.a),w=function(e){e>1500&&(new y).fetch(h()(".js-components-container"),"rightHtml")},x={render:b()(function(){return f.a.read(function(){var e=document.querySelector(".js-article__body");return e?e.getBoundingClientRect()&&e.getBoundingClientRect().height:0}).then(w),v}),whenRendered:v}},410:function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return u});var i=n(9),o=n.n(i),a=n(0),s=n(17),r=n(3),c=n(52),l=n.n(c),d=document.querySelector(".js-liveblog-body, .js-article__body, .js-article__body--minute-article"),u=function(){if(("mobile"!==Object(s.c)()||a.a.get("page.isMinuteArticle"))&&a.a.get("switches.enhanceTweets")){var e=Array.from(document.querySelectorAll("blockquote.js-tweet")),t=Object(s.f)().height;e.forEach(function(e){var n=e.getBoundingClientRect();2.5*t>n.top&&n.top+n.height>0&&o.a.write(function(){e.classList.remove("js-tweet"),e.classList.add("twitter-tweet"),function(){var e=Array.from(document.querySelectorAll("blockquote.twitter-tweet")),t=document.getElementById("twitter-widget");if(e.length){if(!t){var n=document.createElement("script"),i=document.scripts[0];n.id="twitter-widget",n.async=!0,n.src="//platform.twitter.com/widgets.js",i&&i.parentNode&&i.parentNode.insertBefore(n,i)}"undefined"!=typeof twttr&&twttr.widgets&&twttr.widgets.load&&twttr.widgets.load(d)}}()})})}},h=function(){r.a.on("window:throttledScroll",l()(u,200))}},411:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return f});var i=n(7),o=n(0),a=n(17),s=n(33),r=n(3),c=n(32),l=n(355),d=function(e,t){return i.a.write(function(){e.innerHTML=t.html,e.classList.remove("element-rich-link--not-upgraded"),e.classList.add("element-rich-link--upgraded"),Array.from(document.getElementsByClassName("submeta-container--break")).forEach(function(e){e.classList.remove("submeta-container--break")}),r.a.emit("rich-link:loaded",e)})},u=function(e){var t=e.querySelector("a");if(!t)return Promise.resolve();var n=t.href,r=o.a.get("page.host"),l=n.split(r),u=Object(a.l)({max:"mobileLandscape"});return l&&l[1]?Object(s.a)("/embed/card"+l[1]+".json",{mode:"cors"}).then(function(t){t.html&&(u?function(e){return i.a.read(function(){var t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement&&document.documentElement.clientHeight||0;return t.top>n})}(e).then(function(n){n&&d(e,t)}):d(e,t))}).catch(function(e){Object(c.a)(e,{feature:"rich-links"})}):Promise.resolve()},h=function(e){return e.includes(o.a.get("page.richLink"))},f=function(){var e=void 0,t=Array.from(document.querySelectorAll(".element-rich-link a")).map(function(e){return e.href}).some(h),n=o.a.get("page.shouldHideAdverts")||!o.a.get("page.showRelatedContent");return!o.a.get("page.richLink")||o.a.get("page.richLink").includes(o.a.get("page.pageId"))||n||t?Promise.resolve():l.a.fillSpace({bodySelector:".js-article__body",slotSelector:" > p",minAbove:200,minBelow:250,clearContentMeta:50,selectors:{" > h2":{minAbove:"mobile"===Object(a.c)()?20:0,minBelow:200}," > *:not(p):not(h2):not(blockquote)":{minAbove:35,minBelow:300}," .ad-slot":{minAbove:150,minBelow:200}," .element-rich-link":{minAbove:500,minBelow:500}}},function(t){var n,i='<aside class=" element element-rich-link element-rich-link--tag\n                    element--thumbnail element-rich-link--not-upgraded"\n            data-component="rich-link-tag"\n            data-link-name="rich-link-tag"\n            >\n        <p><a href="'+(n={href:o.a.get("page.richLink")}.href)+'">'+n+"</a></p>\n    </aside>";return t[0].insertAdjacentHTML("beforebegin",i),e=t[0].previousElementSibling}).then(function(t){if(t&&e)return u(e)})},g=function(){Array.from(document.getElementsByClassName("element-rich-link--not-upgraded")).forEach(u)}},485:function(e,t){e.exports='<a class="rounded-icon block-share__item block-share__item--<%=css%> js-blockshare-link" href="<%=url%>" target="_blank" data-link-name="social <%=css%>">\n    <span class="u-h"><%=text%></span>\n    <%= icon %>\n</a>\n'},486:function(e,t){e.exports='<div class="pamplemousse gallery-lightbox__loader js-loader">\n<div class="pamplemousse__pip"><i></i></div>\n<div class="pamplemousse__pip"><i></i></div>\n<div class="pamplemousse__pip"><i></i></div>\n</div>'},487:function(e,t){e.exports='<li class="gallery-lightbox__item gallery-lightbox__item--endslate js-gallery-slide">\n<div class="gallery-lightbox__endslate js-gallery-endslate fc-container--media"></div>\n</li>'},488:function(e,t){e.exports='<div class="gallery-lightbox__btn gallery-lightbox__btn--<%=label%> js-gallery-<%=label%>">\n<button data-link-name="gallery-lightbox <%=label%>" class="gallery-lightbox__btn-body"><i></i><%=label%></button>\n</div>'},489:function(e,t){e.exports='<li class="<%=articleType%>-lightbox__item <%=articleType%>-lightbox__item--img js-<%=articleType%>-slide">\n    <div class="<%=articleType%>-lightbox__img-container"><img class="<%=articleType%>-lightbox__img js-<%=articleType%>-lightbox-img"></div>\n    <div class="<%=articleType%>-lightbox__info js-<%=articleType%>-lightbox-info">\n        <div class="<%=articleType%>-lightbox__progress <%=articleType%>-lightbox__progress--info">\n            <span class="<%=articleType%>-lightbox__index"><%=index%></span>\n            <span class="<%=articleType%>-lightbox__progress-separator"></span>\n            <span class="<%=articleType%>-lightbox__count"><%=count%></span>\n            </div>\n        <div class="<%=articleType%>-lightbox__img-caption"><%=caption%></div>\n        <div class="<%=articleType%>-lightbox__img-credit"><%=credit%></div>\n        <div class="block-share block-share--<%=articleType%>" data-link-name="block share">\n            <%=shareButtons%>\n        </div>\n</li>\n'},490:function(e,t){e.exports='<details class="campaign campaign--snippet">\n\n    <summary class="campaign--snippet__header">\n        <div class="campaign--kicker">\n            <div class="campaign--snippet__heading-logo">\n                <div class="speech-bubble">\n                    <h4>Take part</h4>\n                </div>\n            </div>\n            <div class="heading">\n                <h4 class="campaign--snippet__headline"> <%= data.title %></h4>\n                <p> <%= data.description %></p>\n            </div>\n        </div>\n        <button class="campaign__button campaign__button--large campaign__button--rounded campaign--snippet__handle" aria-hidden="true">\n            <span class="is-off">\n                <svg class="icon icon--plus " viewBox="0 0 18 18">\n                    <path d="M8.2 0h1.6l.4 7.8 7.8.4v1.6l-7.8.4-.4 7.8H8.2l-.4-7.8L0 9.8V8.2l7.8-.4.4-7.8z"></path>\n                </svg>\n                    Tell us\n                </span>\n            <span class="is-on">\n                <svg class="icon icon--minus " viewBox="0 0 32 32">\n                    <rect x="5" y="15" width="22" height="3"></rect>\n                </svg>\n                  Hide\n            </span>\n        </button>\n    </summary>\n\n\n    <form action="/formstack-campaign/submit" method="post" class="campaign--snippet__body">\n\n        <input name="formId" type="hidden" value="<%=data.formId%>" />\n\n        <% data.formFields.forEach(function(field) { %>\n\n        <div class="form_input form_input--<%=field.type%>">\n            <div class="form_field">\n                <label for="<%=field.name%>"\n                       class="form_field_label">\n                    <%= field.label %>\n                    <% if(field.description) { %>\n                        <span>(<%= field.description %>)</span>\n                    <% } %>\n                </label>\n\n                <% if(field.type === "textarea") { %>\n                <textarea name="field_<%=field.id%>"<% if (field.required == "1") { %> required <% } %>/></textarea>\n\n                <% } else if(field.type === "radio" || field.type === "checkbox") { %>\n                <div class="form_option_container">\n                <% field.options.forEach(function(option){ %>\n                    <input type="<%=field.type%>"\n                       value="<%=option.value%>"\n                       id="<%=option.label%>"\n                       name="field_<%=field.id%>"\n                    <% if (field.required == "1") { %> required <% } %>\n                    />\n                    <label for="<%=option.label%>">\n                        <%=option.value%>\n                    </label>\n                <% }) %>\n                </div>\n\n                <% } else if(field.type === "select") { %>\n                <select name="field_<%=field.id%>"\n                <% if (field.required == "1") { %> required <% } %>\n                >\n                <% field.options.forEach(function(option){ %>\n                <option value="<%=option.value%>">\n                    <%=option.value%>\n                </option>\n                <% }) %>\n\n                </select>\n\n                <% } else { %>\n                <input name="field_<%=field.id%>"\n                       type="<%=field.type%>"\n                <% if (field.required == "1") { %> required <% } %>\n                />\n                <% } %>\n            </div>\n        </div>\n\n        <% }) %>\n\n        <div class="form_footer">\n            <div class="form_submit">\n                <button class="button button--rounded" type="submit">Share with the Guardian</button>\n            </div>\n            <div class="t_and_c">\n                <a href="https://www.theguardian.com/help/terms-of-service">Terms and conditions</a>\n            </div>\n        </div>\n\n    </form>\n\n</details>\n'},491:function(e,t){e.exports='<%= icon %><span class="sharecount__value sharecount__value--short">0</span> Shares\n'},492:function(e,t){e.exports='<h3 class="sharecount__heading"><%=icon%><span class="sharecount__text u-h">Shares</span></h3>\n<div class="sharecount__value sharecount__value--full">0</div>\n<div class="sharecount__value sharecount__value--short">0</div>\n'},493:function(e,t,n){var i,o;void 0===(o="function"==typeof(i=function(){var e,t={};function n(){var t,n,i,o,a,s,r,c;return void 0===e&&(n=document.createElement("p"),i=document.createElement("span"),o=document.createTextNode("aa"),a=document.createTextNode("aa"),(s=document.createElement("img")).setAttribute("src","#null"),r=document.createRange(),e={},n.appendChild(o),n.appendChild(i),i.appendChild(s),i.appendChild(a),document.body.appendChild(n),r.setStart(o,1),r.setEnd(i,0),e.getClientRects=e.getBoundingClientRect=r.getClientRects().length>1,e.getClientRects||(r.setEnd(a,1),e.getClientRects=e.getBoundingClientRect=r.getClientRects().length<3),e.getBoundingClientRect||(r.setEnd(r.startContainer,r.startOffset),t=r.getBoundingClientRect(),e.getBoundingClientRect=0===t.top&&0===t.left),document.body.removeChild(n),c=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")(),e.ieZoom=c&&c<=10),e}function i(e){var t;return e?screen.deviceXDPI===screen.logicalXDPI?e:"length"in e?Array.prototype.map.call(e,i):(t=screen.deviceXDPI/screen.logicalXDPI,{top:e.top/t,bottom:e.bottom/t,left:e.left/t,right:e.right/t,width:e.width/t,height:e.height/t}):e}function o(e,t){var n,i=0;if(1024>=t.length)return Array.prototype.push.apply(e,t);for(;i<t.length;)n=Array.prototype.push.apply(e,Array.prototype.slice.call(t,i,i+1024)),i+=1024;return n}return t.getClientRects=function(e){var t,a,s,r,c=n();if(c.ieZoom)return i(e.getClientRects());if(!c.getClientRects)return e.getClientRects();for(t=[],a=e.endContainer,s=e.endOffset,r=document.createRange();a!==e.commonAncestorContainer;)r.setStart(a,0),r.setEnd(a,s),o(t,r.getClientRects()),s=Array.prototype.indexOf.call(a.parentNode.childNodes,a),a=a.parentNode;return(r=e.cloneRange()).setEnd(a,s),o(t,r.getClientRects()),t},t.getBoundingClientRect=function(e){var t,o,a,s,r,c,l=this.getClientRects(e);if(0===l.length)return null;if(r=e.getBoundingClientRect(),(c=n()).ieZoom)return i(r);if(!c.getBoundingClientRect)return r;if(0===r.width&&0===r.height)return l[0];for(t=0,o=l.length;t<o;t++)s=l[t],a?(a.left=Math.min(a.left,s.left),a.top=Math.min(a.top,s.top),a.right=Math.max(a.right,s.right),a.bottom=Math.max(a.bottom,s.bottom)):a={left:s.left,top:s.top,right:s.right,bottom:s.bottom};return a&&(a.width=a.right-a.left,a.height=a.bottom-a.top),a},t})?i.call(t,n,t,e):i)||(e.exports=o)},494:function(e,t,n){var i;void 0===(i=function(){var e="fenced",t="fenced-rendered",n=300,i=12;function o(e){setTimeout(function(){!function e(t,n,i,o){o=o||0,t(),n>0&&setTimeout(function(){e(t,n-1,i+o,i)},i)}(function(){var t,n,i;(i=(n=(t=e).contentWindow&&t.contentWindow.document)&&n.body)&&(i.style.padding=0,i.style.margin=0,i.style.overflow="hidden"),function(e){var t=e.contentWindow&&e.contentWindow.document;if(t){var n=t.documentElement&&t.documentElement.scrollHeight||t.body&&t.body.scrollHeight||0;e.style.height=n+"px"}}(e)},i,n)},0)}function a(e,t){return e.classList?e.classList.contains(t):-1!==e.className.indexOf(t)}function s(n,i){if(i=i||{},"IFRAME"!==n.tagName)throw new Error("Cannot render non-iframe elements!");if(!a(n,e))throw new Error("Cannot render iframes with no "+e+" class!");var s=a(n,t);if(!s||i.force){var r,c;if(n.style.height=0,n.frameBorder=0,n.style.border="none",n.style.overflow="hidden",n.width="100%",n.srcdoc)"complete"===n.contentWindow.document.readyState?o(n):s||n.addEventListener("load",function(){o(n)},!1);else{var l=n.getAttribute("srcdoc");l&&"string"==typeof l&&(n.contentWindow.contents=l,n.src='javascript:window["contents"]',o(n))}c=t,(r=n).classList?r.classList.add(c):r.className+=" "+c}}function r(e){var t=document.createElement("div");t.innerHTML=(e||"").trim();var n=t.firstChild,i=n&&"IFRAME"===n.tagName,o=n&&!n.nextSibling;return i&&o}return{render:s,renderAll:function(){for(var t="iframe."+e,n=document.querySelectorAll(t),i=0,o=n.length;i<o;++i)s(n[i])},isSafeCode:r,wrap:function(t){return r(t)?t:'<iframe srcdoc="<html><head></head><body>'+(n=t,i=document.createElement("div"),i.appendChild(document.createTextNode(n)),i.innerHTML).replace(/\"/g,"&quot;")+'</body></html>" class="'+e+'"></iframe>';var n,i}}}.call(t,n,t,e))||(e.exports=i)},538:function(e,t,n){"use strict";n.r(t);var i=n(366),o=n(358),a=n(5),s=n.n(a),r=n(19),c=n(7),l=n(3),d=n(17),u=function(e){e.elements.forEach(function(t){!function(e){c.a.write(function(){e.$el.css("height","")}).then(function(){if(e.isMobile)return c.a.read(function(){return e.$el.height()}).then(function(t){return c.a.write(function(){e.$el.css("height",t)})})})}({$el:Object(r.a)(t),isMobile:e.isMobile})})},h=function(){c.a.read(function(){return{elements:[].concat(s()(document.getElementsByClassName("js-is-fixed-height"))),isMobile:"mobile"===Object(d.c)()}}).then(u)};n.d(t,"init",function(){return f});var f=function(){Object(i.a)(),Object(o.initTrails)(),l.a.on("window:throttledResize",h),l.a.on("window:orientationchange",h),h()}},541:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n(17),a=n(3),s=n(411),r=n(20),c=n.n(r),l=n(24),d=n.n(l),u=n(1),h=n.n(u),f=n(7),g=function(){function e(t){var n=this;c()(this,e),window.addEventListener("click",function(){n.checkPosition()}),a.a.addListener("window:throttledScroll",function(){n.checkPosition()}),a.a.addListener("window:throttledResize",function(){n.calculateContainerPositioning()}),this.affixed=!1,this.$markerTop=h()(t.topMarker),this.$markerBottom=h()(t.bottomMarker),this.$container=h()(t.containerElement),this.$element=h()(t.element),this.$window=h()(document.body),this.checkPosition(),this.calculateContainerPositioning()}return d()(e,[{key:"calculateContainerPositioning",value:function(){var e=this;f.a.write(function(){e.$container.css("top","0")}).then(function(){return f.a.read(function(){return e.$markerTop.offset().top-e.$container.offset().top})}).then(function(t){f.a.write(function(){e.$container.css("top",t+"px")})})}},{key:"checkPosition",value:function(){var e,t=this,n=this.$window.scrollTop(),i=this.$markerTop.offset().top,o=this.$markerBottom.offset().top,a=this.$element.dim().height,s=n>=i,r=n+a<o,c=a<h.a.viewport().height,l=r&&s&&c;if(this.affixed!==l){if(this.affixed=l,r)f.a.write(function(){t.$container.removeClass("affix-bottom")}),this.calculateContainerPositioning();else{var d=o-i-a+("auto"!==(e=this.$container.css("top"))?parseInt(e,10):0);f.a.write(function(){t.$container.css("top",d+"px"),t.$container.addClass("affix-bottom")})}f.a.write(function(){l?t.$element.addClass("affix"):t.$element.removeClass("affix")})}}}]),e}(),p=n(5),m=n.n(p),b=n(18),v=n.n(b),y=n(31),w=n.n(y),x=n(19),_=n(33),j=n(410),k=n(363),C=n(210),O=n(344),T=n(204),E=function(e){var t=Object.assign({toastOffsetTop:12,minUpdateDelay:1e3*(Object(o.l)({min:"desktop"})?10:30),maxUpdateDelay:12e5,backoffMultiplier:.75},e),n=Object(x.a)(".js-liveblog-body"),i=Object(x.a)(".toast__button"),s=Object(x.a)(".toast__text",i),r=w()(".toast__container")[0],c=t.minUpdateDelay,l=n.data("most-recent-block"),d=0,u=void 0,g=!window.location.search.includes("?page="),p=function(){f.a.write(function(){Object(x.a)(".autoupdate--hidden",n).addClass("autoupdate--highlight").removeClass("autoupdate--hidden"),a.a.emit("modules:autoupdate:unread",0)})},b=function(){f.a.write(function(){if(d>0){var e=d>1?" new updates":" new update";i.removeClass("toast__button--closed"),Object(x.a)(r).addClass("toast__container--open"),s.html(d+e)}else i.removeClass("loading").addClass("toast__button--closed"),Object(x.a)(r).removeClass("toast__container--open")})},y=function(){Object(o.o)()&&p(),d=0,b()},E=function e(){void 0!==u&&clearTimeout(u);var i=0,s="?lastUpdate="+(l||"block-0")+"&isLivePage="+(g?"true":"false"),r=window.location.pathname+".json"+s,p=function(){var n,a;0===i||c>0?(n=c,a=void 0,a=Object(o.o)()?t.minUpdateDelay:Math.min(1.5*n,t.maxUpdateDelay),c=a,u=setTimeout(e,c)):u=setTimeout(e,1)};return Object(_.a)(r,{mode:"cors"}).then(function(e){var t,o,s;(i=e.numNewBlocks)>0&&(d+=i,a.a.emit("modules:autoupdate:unread",d),l=e.mostRecentBlockId,g?(t=e.html,o=x.a.create("<div>"+t+"</div>")[0],s=void 0,f.a.write(function(){h()(o.children).addClass("autoupdate--hidden"),s=[].concat(m()(o.children)),n.prepend(s),a.a.emit("modules:autoupdate:updates",s.length),Object(O.a)(),Object(j.a)(),Object(T.a)(s)}),n.offset().top<window.pageYOffset?b():y()):b()),p()}).catch(function(){p()})};(function(){var e=document.title;a.a.on("modules:autoupdate:unread",function(t){!function(e,t){document.title=e>0?"("+e+") "+t:t}(t,e)})})(),new k.a(r,{top:t.toastOffsetTop,emitMessage:!0,containInParent:!1}).init(),E(),Object(o.j)(),v.a.on(document.body,"click",".toast__button",function(){g?f.a.read(function(){Object(C.b)(w()(".blocks")[0],300,"easeOutQuad"),f.a.write(function(){i.addClass("loading")}).then(function(){y()})}):window.location.assign(window.location.pathname)}),a.a.on("modules:toast__tofix:unfixed",function(){g&&d>0&&f.a.write(function(){i.addClass("loading")}).then(function(){y()})}),a.a.on("modules:detect:pagevisibility:visible",function(){0===d&&p(),c=0,E()}),f.a.write(function(){n.addClass("autoupdate--has-animation")})},S=n(366),I=n(358),A=n(168);n.d(t,"init",function(){return B});var R=function(){var e=i.a.get("page.keywordIds","");!Object(o.l)({min:"desktop"})||e.includes("football/football")||e.includes("sport/rugby-union")||new g({element:document.querySelector(".js-live-blog__sticky-components-container"),topMarker:document.querySelector(".js-top-marker"),bottomMarker:document.querySelector(".js-bottom-marker"),containerElement:document.querySelector(".js-live-blog__sticky-components")})},P=function(){i.a.get("page.isLive")&&E()},L=function(){window.setInterval(function(){return Object(O.a)()},6e4)},B=function(){Object(A.b)([["lb-autoupdate",P],["lb-timeline",R],["lb-timestamp",L],["lb-richlinks",s.b]]),Object(I.initTrails)(),Object(S.a)(),Object(A.b)([["lb-ready",function(){a.a.emit("page:liveblog:ready")}]])}},544:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n(31),a=n.n(o),s=n(19),r=n(168),c=n(17),l=n(3),d=n(58),u=n(411),h=n(9),f=n.n(h),g=n(33),p=n(32),m=function(e){var t=Object(s.a)("a",e).attr("href");t.match(/https:\/\/membership.theguardian.com/)&&Object(g.a)(t+"/card",{mode:"cors"}).then(function(t){t.html&&f.a.write(function(){Object(s.a)(e).html(t.html).removeClass("element-membership--not-upgraded").addClass("element-membership--upgraded")})}).catch(function(e){Object(p.a)(e,{feature:"membership-events"})})},b=function(){Object(s.a)(".element-membership--not-upgraded").each(m)},v=n(382),y=n(18),w=n.n(y),x=n(7),_=function(){if(HTMLFormElement.prototype.checkValidity){var e=Array.from(document.getElementsByClassName("js-atom-quiz--instant-reveal"));e.length&&w.a.on(document,"click",e,function e(t){var n=t.currentTarget,i=n.querySelectorAll(":checked + .atom-quiz__answer__item--is-correct").length;if(n.checkValidity()){var o=function(){var t=n.querySelector(".js-atom-quiz__bucket-message--"+i);if(t)return x.a.write(function(){t.style.display="block"}),w.a.off(document,"click",e),"break";i-=1};do{if("break"===o())break}while(i>=0)}})}},j=n(366),k=n(358),C=n(120),O=n.n(C),T=n(490),E=n.n(T),S=n(79),I=function(e){e.preventDefault();var t,n=e.target,i=(t=n.elements,[].reduce.call(t,function(e,t){return t.name>""&&("checkbox"===t.type?e[t.name]=(e[t.name]||"").concat("\n"+t.value):e[t.name]=t.value),e},{}));return Object(S.a)("/formstack-campaign/submit",{method:"post",body:JSON.stringify(i),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){e.ok?function(e){x.a.write(function(){e.textContent="Thank you for your contribution"})}(n):function(e){x.a.write(function(){e.append("Sorry, there was an error submitting your contribution")})}(n)})},A=function(){var e=function(){var e=i.a.get("page.campaigns").filter(function(e){return"callout"===e.fields._type}),t=e[e.length-1];if(t){var n=t.fields;return{title:n.callout,description:n.description,formFields:n.formFields,formId:n.formId}}}(),t=document.querySelector(".content__article-body p:nth-of-type(4)");e&&t&&function(e,t){var n='<figure class="element element-campaign">'+O()(E.a,{data:t})+"</figure>";x.a.write(function(){e.insertAdjacentHTML("afterend",n)}).then(function(){var e=document.querySelector(".element-campaign .campaign .campaign--snippet__body");e&&e.addEventListener("submit",I)})}(t,e)},R=n(28),P=n.n(R);n.d(t,"init",function(){return B});var L={initCmpParam:function(){var e=Object(d.d)();e.CMP&&Object(s.a)(".element-pass-cmp").each(function(t){t.src=t.src+"?CMP="+e.CMP})},initRightHandComponent:function(){var e=a()(".js-content-main-column");!i.a.hasTone("Match reports")&&e[0]&&e[0].offsetHeight>1150&&Object(c.l)({min:"desktop"})?v.a.render():l.a.emit("modules:onward:geo-most-popular:cancel")},initQuizListeners:function(){l.a.on("quiz/ophan-event",P.a.record)},emitReadyEvent:function(){l.a.emit("page:article:ready")}},B=function(){Object(r.b)([["article-trails",k.initTrails],["article-liveblog-common",j.a],["article-righthand-component",L.initRightHandComponent],["article-cmp-param",L.initCmpParam],["article-quiz-listeners",L.initQuizListeners],["article-rich-links",u.b],["article-tag-rich-link",u.a],["article-upgrade-membership-events",b],["article-mediator-emit-event",L.emitReadyEvent],["article-handle-quiz-completion",_],["article-campaign",A]])}},555:function(e,t,n){"use strict";n.r(t),n.d(t,"init",function(){return c});var i=n(31),o=n.n(i),a=n(0),s=n(51),r=n(358),c=function(){var e,t;Object(r.initTrails)(),a.a.get("page.showRelatedContent")&&(e=new s.a,t=o()(".js-gallery-most-popular")[0],e.manipulationType="html",e.endpoint="/gallery/most-viewed.json",e.fetch(t,"html"))}},556:function(e,t,n){"use strict";n.r(t),n.d(t,"init",function(){return H}),n.d(t,"_",function(){return U});var i=n(20),o=n.n(i),a=n(24),s=n.n(a),r=n(83),c=n.n(r),l=n(82),d=n.n(l),u=n(18),h=n.n(u),f=n(1),g=n.n(f),p=n(31),m=n.n(p),b=n(19),v=n(0),y=n(17),w=n(380),x=n(3),_=n(120),j=n.n(_),k=n(58),C=n(51),O=n(202),T=n(489),E=n.n(T),S=n(488),I=n.n(S),A=n(487),R=n.n(A),P=n(486),L=n.n(P),B=n(485),$=n.n(B),M=n(170),q=n.n(M),D=n(362),z=function(e){var t=g()(e);t.addClass("gallery-lightbox__button-pulse"),window.setTimeout(function(){t.removeClass("gallery-lightbox__button-pulse")},75)},N=function(e){function t(){return o()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),s()(t,[{key:"prerender",value:function(){g()(this.elem).addClass(this.componentClass)}}]),t}(C.a),F=function(){function e(){var t=this;o()(this,e),this.endslate=new N,this.states={closed:{enter:function(){this.hide()},leave:function(){this.show(),Object(k.f)({},document.title,"/"+this.galleryJson.id)},events:{open:function(){this.swipe&&this.swipe.slide(this.index,0),this.state="image"},loadJson:function(e){var t=this;this.galleryJson=e,this.images=e.images||[],this.$countEl.text(this.images.length);var n=this.images.map(function(e,n){return t.generateImgHTML(e,n+1)}).join("");this.$contentEl.html(n),this.$images=Object(b.a)(".js-gallery-lightbox-img",this.$contentEl[0]),this.showEndslate&&this.loadEndslate(),this.$slides=Object(b.a)(".js-gallery-slide",this.$contentEl[0]),this.useSwipe&&this.initSwipe(),this.galleryJson.images.length<2&&(g()([this.nextBtn,this.prevBtn]).hide(),Object(b.a)(".gallery-lightbox__progress",this.lightboxEl).hide()),this.state="image"}}},image:{enter:function(){this.swipeContainerWidth=this.$swipeContainer.dim().width,this.loadSurroundingImages(this.index,this.images.length),this.translateContent(this.index,0,this.useSwipe&&Object(y.l)({max:"tablet"})?100:0),Object(k.f)({},document.title,"/"+this.galleryJson.id+"#img-"+this.index,!0),h.a.on(this.$swipeContainer[0],"click",".js-gallery-content",this.toggleInfo),x.a.on("window:throttledResize",this.resize),this.$indexEl.text(this.index)},leave:function(){h.a.off(this.$swipeContainer[0],"click",this.toggleInfo),x.a.off("window:throttledResize",this.resize)},events:{next:function(){z(this.nextBtn),this.index===this.images.length?this.showEndslate?this.state="endslate":(this.index=1,this.reloadState=!0):(this.index+=1,this.reloadState=!0)},prev:function(){z(this.prevBtn),1===this.index?this.showEndslate?this.state="endslate":(this.index=this.images.length,this.reloadState=!0):(this.index-=1,this.reloadState=!0)},reload:function(){this.reloadState=!0},toggleInfo:function(){z(this.infoBtn),this.$lightboxEl.toggleClass("gallery-lightbox--show-info")},hideInfo:function(){z(this.infoBtn),this.$lightboxEl.removeClass("gallery-lightbox--show-info")},showInfo:function(){z(this.infoBtn),this.$lightboxEl.addClass("gallery-lightbox--show-info")},resize:function(){this.swipeContainerWidth=this.$swipeContainer.dim().width,this.loadSurroundingImages(this.index,this.images.length),this.translateContent(this.index,0,0)},close:function(){this.state="closed"}}},endslate:{enter:function(){this.translateContent(this.$slides.length,0,0),this.index=this.images.length+1,x.a.on("window:throttledResize",this.resize)},leave:function(){x.a.off("window:throttledResize",this.resize)},events:{next:function(){z(this.nextBtn),this.index=1,this.state="image"},prev:function(){z(this.prevBtn),this.index=this.images.length,this.state="image"},reload:function(){this.reloadState=!0},resize:function(){this.swipeContainerWidth=this.$swipeContainer.dim().width,this.translateContent(this.$slides.length,0,0)},close:function(){this.state="closed"}}}},this.showEndslate="mobile"!==Object(y.c)()&&"childrens-books-site"!==v.a.get("page.section")&&"Gallery"===v.a.get("page.contentType"),this.useSwipe=Object(y.i)(),this.swipeThreshold=.05;var n=function(e){var t=I.a;return j()(t,{label:e})},i='<div class="overlay gallery-lightbox gallery-lightbox--closed gallery-lightbox--hover">\n                <div class="gallery-lightbox__sidebar">\n                    '+n("close")+'\n                    <div class="gallery-lightbox__progress  gallery-lightbox__progress--sidebar">\n                        <span class="gallery-lightbox__index js-gallery-index"></span>\n                        <span class="gallery-lightbox__progress-separator"></span>\n                        <span class="gallery-lightbox__count js-gallery-count"></span>\n                    </div>\n                    '+n("next")+"\n                    "+n("prev")+"\n                    "+n("info-button")+'\n                </div>\n                <div class="js-gallery-swipe gallery-lightbox__swipe-container">\n                    <ul class="gallery-lightbox__content js-gallery-content"></ul>\n                </div>\n            </div>';this.lightboxEl=g.a.create(i),this.$lightboxEl=g()(this.lightboxEl).prependTo(document.body),this.$indexEl=Object(b.a)(".js-gallery-index",this.lightboxEl),this.$countEl=Object(b.a)(".js-gallery-count",this.lightboxEl),this.$contentEl=Object(b.a)(".js-gallery-content",this.lightboxEl),this.nextBtn=m()(".js-gallery-next",this.lightboxEl)[0],this.prevBtn=m()(".js-gallery-prev",this.lightboxEl)[0],this.closeBtn=m()(".js-gallery-close",this.lightboxEl)[0],this.infoBtn=m()(".js-gallery-info-button",this.lightboxEl)[0],this.$swipeContainer=Object(b.a)(".js-gallery-swipe"),h.a.on(this.nextBtn,"click",this.trigger.bind(this,"next")),h.a.on(this.prevBtn,"click",this.trigger.bind(this,"prev")),h.a.on(this.closeBtn,"click",this.close.bind(this)),h.a.on(this.infoBtn,"click",this.trigger.bind(this,"toggleInfo")),this.handleKeyEvents=this.handleKeyEvents.bind(this),this.resize=this.trigger.bind(this,"resize"),this.toggleInfo=function(e){g()(e.target).hasClass("js-gallery-lightbox-info")||b.a.ancestor(e.target,"js-gallery-lightbox-info")||t.trigger("toggleInfo")},Object(y.i)()&&this.disableHover(),h.a.on(window,"popstate",function(e){e.state||t.trigger("close")}),this.fsm=new w.a({initial:"closed",onChangeState:function(e,t){this.$lightboxEl.removeClass("gallery-lightbox--"+e).addClass("gallery-lightbox--"+t)},context:this,states:this.states})}return s()(e,[{key:"generateImgHTML",value:function(e,t){var n=v.a.get("page.shortUrl"),i=e.src.startsWith("//")?"http:":"",o=[{text:"Facebook",css:"facebook",icon:Object(O.a)("shareFacebook",["icon"]),url:"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n+"/sfb#img-"+t)},{text:"Twitter",css:"twitter",icon:Object(O.a)("shareTwitter",["icon"]),url:"https://twitter.com/intent/tweet?text="+encodeURIComponent(v.a.get("page.webTitle"))+"&url="+encodeURIComponent(n+"/stw#img-"+t)},{text:"Pinterest",css:"pinterest",icon:Object(O.a)("sharePinterest",["icon"]),url:encodeURI("http://www.pinterest.com/pin/create/button/?description="+v.a.get("page.webTitle")+"&url="+n+"&media="+i+e.src)}];return j()(E.a.replace(/^\s+|\s+$/gm,""),{articleType:"gallery",count:this.images.length,index:t,caption:e.caption,credit:e.displayCredit?e.credit:"",blockShortUrl:n,shareButtons:o.map(function(e){return j()($.a,e)}).join("")})}},{key:"initSwipe",value:function(){var e=this,t=void 0,n=void 0,i=void 0;h.a.on(this.$swipeContainer[0],"touchstart",function(o){t=e.swipeContainerWidth*e.swipeThreshold,n=o.touches[0].pageX,i=0}),h.a.on(this.$swipeContainer[0],"touchmove",q()(function(t){t.preventDefault(),t.touches.length>1||t.scale&&1!==t.scale||(i=t.touches[0].pageX-n,e.translateContent(e.index,i,20))},20,{trailing:!1})),h.a.on(this.$swipeContainer[0],"touchend",function(){var n;n=Math.abs(i)>t?i>t?1:-1:0,i=0,1===n?e.index>1?e.trigger("prev"):e.trigger("reload"):-1===n&&e.index<e.$slides.length?e.trigger("next"):e.trigger("reload")})}},{key:"disableHover",value:function(){this.$lightboxEl.removeClass("gallery-lightbox--hover")}},{key:"trigger",value:function(e,t){this.fsm.trigger(e,t)}},{key:"loadGalleryfromJson",value:function(e,t){this.index=t,this.galleryJson&&e.id===this.galleryJson.id?this.trigger("open"):this.trigger("loadJson",e)}},{key:"loadSurroundingImages",value:function(e,t){var n=this,i=void 0,o=void 0;[-1,0,1].map(function(n){return e+n===0?t-1:(e-1+n)%t}).forEach(function(e){i=n.images[e],(o=g()(n.$images[e])).attr("src")||(o.parent().append(g.a.create(L.a)),o.attr("src",i.src),o.attr("srcset",i.srcsets),o.attr("sizes",i.sizes),h.a.one(o[0],"load",function(){Object(b.a)(".js-loader").remove()}))})}},{key:"translateContent",value:function(e,t,n){var i=-1*(e-1)*this.swipeContainerWidth,o=this.$contentEl[0];Object.assign(o.style,{webkitTransitionDuration:n+"ms",mozTransitionDuration:n+"ms",msTransitionDuration:n+"ms",transitionDuration:n+"ms",webkitTransform:"translate("+(i+t)+"px,0) translateZ(0)",mozTransform:"translate("+(i+t)+"px,0)",msTransform:"translate("+(i+t)+"px,0)",transform:"translate("+(i+t)+"px,0) translateZ(0)"})}},{key:"show",value:function(){var e=g()(document.body);this.bodyScrollPosition=e.scrollTop(),e.addClass("has-overlay"),this.$lightboxEl.addClass("gallery-lightbox--open"),h.a.off(document.body,"keydown",this.handleKeyEvents),h.a.on(document.body,"keydown",this.handleKeyEvents)}},{key:"close",value:function(){k.h?Object(k.a)():this.trigger("close"),this.trigger("close")}},{key:"hide",value:function(){var e=this,t=g()(document.body);t.removeClass("has-overlay"),h.a.off(document.body,"keydown",this.handleKeyEvents),window.setTimeout(function(){e.bodyScrollPosition&&t.scrollTop(e.bodyScrollPosition),e.$lightboxEl.removeClass("gallery-lightbox--open"),x.a.emit("ui:images:vh")},1)}},{key:"handleKeyEvents",value:function(e){37===e.keyCode?this.trigger("prev"):39===e.keyCode?this.trigger("next"):38===e.keyCode?this.trigger("showInfo"):40===e.keyCode?this.trigger("hideInfo"):27===e.keyCode?this.close():73===e.keyCode&&this.trigger("toggleInfo")}},{key:"loadEndslate",value:function(){!this.endslate.rendered&&this.$contentEl&&(this.endslateEl=g.a.create(R.a),this.$contentEl.append(this.endslateEl),this.endslate.componentClass="gallery-lightbox__endslate",this.endslate.endpoint="/gallery/most-viewed.json",this.endslate.fetch(m()(".js-gallery-endslate",this.endslateEl),"html"))}}]),e}(),H=function(){D.a.then(function(){var e=v.a.get("page.lightboxImages");if(e&&e.images.length>0){var t=void 0,n=window.location.hash,i=void 0;h.a.on(document.body,"click",".js-gallerythumbs",function(n){n.preventDefault();var i=g()(n.currentTarget),o=(i.attr("href")||i.attr("data-gallery-url")).split("#img-"),a=parseInt(o[1],10),s=Number.isNaN(a)?1:a;(t=t||new F).loadGalleryfromJson(e,s)}),t=t||new F;var o="/"+v.a.get("page.pageId"),a=/\?index=(\d+)/.exec(document.location.href);a?(Object(k.f)({},document.title,o,!0),t.loadGalleryfromJson(e,parseInt(a[1],10))):(i=/^#(?:img-)?(\d+)$/.exec(n))&&t.loadGalleryfromJson(e,parseInt(i[1],10))}})},U={GalleryLightbox:F}},85:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var i=function(e,t,n,i,o,a){var s=i,r={eventCategory:"media",eventAction:o(e),eventLabel:n,dimension19:a,dimension20:s},c=t[e.eventType];return c&&(r[c]=1),r},o=function(e){var t=e.mediaType+" ";return e.isPreroll?t+="preroll":t+="content",t}}}]);
//# sourceMappingURL=graun.trail.js.map